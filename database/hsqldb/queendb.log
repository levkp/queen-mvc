/*C12*/SET SCHEMA PUBLIC
drop table if exists album CASCADE 
drop table if exists app_user CASCADE 
drop table if exists genre CASCADE 
drop table if exists song CASCADE 
drop table if exists song_genre CASCADE 
drop sequence entity_pk_seq if exists
drop sequence hibernate_sequence if exists
create sequence entity_pk_seq start with 1 increment by 1
create sequence hibernate_sequence start with 1 increment by 1
create table album (id integer not null, description varchar(5000), title varchar(30) not null, owner_id bigint, release date not null, primary key (id))
create table app_user (id bigint not null, is_admin boolean not null, secret varchar(255) not null, username varchar(255) not null, primary key (id))
create table genre (id integer not null, name varchar(255) not null, primary key (id))
create table song (id integer not null, description varchar(5000), title varchar(30) not null, owner_id bigint, finished_recording timestamp not null, length double not null, album_id integer, primary key (id))
create table song_genre (id integer not null, genre_ordinals integer)
alter table album add constraint UK_3a47omptijvdn5qupc38c4dfi unique (title)
alter table app_user add constraint UK_3k4cplvh82srueuttfkwnylq0 unique (username)
alter table genre add constraint UK_ctffrbu4484ft8dlsa5vmqdka unique (name)
alter table song add constraint UK_901hm98fbktx31qydca5xntn4 unique (title)
alter table album add constraint FK_dr2e6i6cc0ga4srnhj4ts04yh foreign key (owner_id) references app_user
alter table song add constraint FKrcjmk41yqj3pl3iyii40niab0 foreign key (album_id) references album
alter table song add constraint FK_hlw6f1o62mgmp9p6qwff8skgg foreign key (owner_id) references app_user
alter table song_genre add constraint FKf3rf9h261vlifohtmrqvm437l foreign key (id) references song
INSERT INTO GENRE VALUES(0,'Art rock')
INSERT INTO GENRE VALUES(1,'Avant pop')
INSERT INTO GENRE VALUES(2,'Glam rock')
INSERT INTO GENRE VALUES(3,'Hard rock')
INSERT INTO GENRE VALUES(4,'Heavy metal')
INSERT INTO GENRE VALUES(5,'Opera')
INSERT INTO GENRE VALUES(6,'Power pop')
INSERT INTO GENRE VALUES(7,'Progressive rock')
INSERT INTO GENRE VALUES(8,'Soft rock')
COMMIT
INSERT INTO APP_USER VALUES(1,FALSE,'$2a$10$ZO36Pdu/KySApXatNWC/0O4LQSfj8njKPOS7NVz8pS6QmwgzfUAAq','test')
ALTER SEQUENCE PUBLIC.HIBERNATE_SEQUENCE RESTART WITH 2
COMMIT
INSERT INTO ALBUM VALUES(1,NULL,'Test Album',1,'2022-03-27')
ALTER SEQUENCE PUBLIC.ENTITY_PK_SEQ RESTART WITH 2
COMMIT
DELETE FROM ALBUM WHERE ID=1
COMMIT
DISCONNECT
/*C13*/SET SCHEMA PUBLIC
DISCONNECT
/*C14*/SET SCHEMA PUBLIC
DISCONNECT
/*C15*/SET SCHEMA PUBLIC
DISCONNECT
/*C16*/SET SCHEMA PUBLIC
DISCONNECT
/*C17*/SET SCHEMA PUBLIC
DISCONNECT
/*C18*/SET SCHEMA PUBLIC
DISCONNECT
/*C19*/SET SCHEMA PUBLIC
DISCONNECT
/*C20*/SET SCHEMA PUBLIC
DISCONNECT
/*C21*/SET SCHEMA PUBLIC
DISCONNECT
